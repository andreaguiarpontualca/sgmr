<mvc:View
	controllerName="com.pontual.sgmr.controller.Anexos"   
    height="100%"
    xmlns:mvc="sap.ui.core.mvc" 
    xmlns:l="sap.ui.layout"
	xmlns:f="sap.ui.layout.form"
	xmlns:core="sap.ui.core"   
    displayBlock="true"
    xmlns="sap.m"
	xmlns:mdc="sap.ui.mdc"
	xmlns:mdct="sap.ui.mdc.table"
	xmlns:vm="sap.ui.fl.variants"
	xmlns:Table1="sap.ui.mdc.table.Table"
	xmlns:upload="sap.m.upload"
	xmlns:mdcat="sap.ui.mdc.actiontoolbar"
	>

	<Table
		id="table-uploadSet"
		sticky="ColumnHeaders,HeaderToolbar"
		width="auto"
		mode="MultiSelect"
		fixedLayout="false"
		inset="true"
		autoPopinMode="true"
		hiddenInPopin="None"
		items="{path: 'materialRodanteFormularioModel>/items', templateShareable: false}"
		selectionChange="onSelectionChange">

		<headerToolbar>
			<OverflowToolbar>
				<Title
					text="Anexos ({= ${materialRodanteFormularioModel>/items}.length})"
					level="H2"
				/>
				<ToolbarSpacer />

				<SearchField
					width="20%"
					placeholder="Pesquisar"
					liveChange="onSearch"
				>
					<layoutData>
						<OverflowToolbarLayoutData
							priority="NeverOverflow"
						/>
					</layoutData>
				</SearchField>
				<ToolbarSeparator />

				<!-- Use the UploadButtonPlaceholder to add the UploadButton to the toolbar -->
				<upload:ActionsPlaceholder id="uploadButton" placeholderFor="UploadButtonPlaceholder" />
				<Button
					id="cameraSelectedButton"
					icon="sap-icon://camera"
					enabled="false"
					press="onCameraPress"
				/>
				<Button
					id="downloadSelectedButton"
					text="{i18n>download}"
					enabled="false"
					visible="false"
					press="onDownloadFiles"
				/>
				<Button
					id="removeDocumentButton"
					text="{i18n>remover}"
					press="onRemoveButtonPress"
					enabled="false"
				>
					<layoutData>
						<OverflowToolbarLayoutData
							priority="AlwaysOverflow"
						/>
					</layoutData>
				</Button>
				<Button
					id="renameButton"
					enabled="false"
					press="onRenameDocument"
					text="{i18n>renomear}"
				>
					<layoutData>
						<OverflowToolbarLayoutData
							priority="AlwaysOverflow"
						/>
					</layoutData>
				</Button>
			</OverflowToolbar>
		</headerToolbar>

		<dependents>
			<plugins.UploadSetwithTable
				uploadUrl="/uploadFiles"
				multiple="true"
				beforeUploadStarts="onBeforeUploadStarts"
				itemRenamed="onDocumentRenamedSuccess"
				uploadCompleted="onUploadCompleted"
				onActivated="onPluginActivated"
				cloudFilePickerEnabled="true"
				actions="uploadButton"
				uploadEnabled="true"
				previewDialog="FilePreviewDialog"
				>
				<rowConfiguration>
					<upload.UploadItemConfiguration
						fileNamePath="fileName"
						mediaTypePath="mediaType"
						urlPath="url"
						previewablePath="previewable"
						fileSizePath="fileSize"
						isTrustedSourcePath="trustedSource"
					/>
				</rowConfiguration>
			</plugins.UploadSetwithTable>
			<upload.FilePreviewDialog id="FilePreviewDialog" showCarouselArrows="false">
			</upload.FilePreviewDialog>
		</dependents>

		<columns>
			<Column id="fileName" importance="High"                     minScreenWidth="Phone">
				<header>
					<Label text="{i18n>arquivo}" />
				</header>
			</Column>
			<Column id="id" visible="false"  minScreenWidth="Tablet">
				<header>
					<Label text="ID" />
				</header>
			</Column>
			<Column id="revision" visible="false"  minScreenWidth="Tablet">
				<header>
					<Label text="Revision" />
				</header>
			</Column>
			<Column id="status" visible="false"  minScreenWidth="Tablet">
				<header>
					<Label text="Status" />
				</header>
			</Column>
			<Column id="fileSize"  minScreenWidth="Tablet">
				<header>
					<Label text="{i18n>tamanho}" />
				</header>
			</Column>
			<Column id="lastModified" visible="false"  minScreenWidth="Tablet">
				<header>
					<Label text="Last Modified" />
				</header>
			</Column>
			<Column id="actionButton" importance="High"  minScreenWidth="Tablet"/>
		</columns>


		<items>
			<ColumnListItem
				press="onItemPress"
				highlight="{= ${materialRodanteFormularioModel>uploadState} === 'Complete' ? 'Indication05' : null }"
			>

			<!-- Cells with cell template defining content for each column (cells and columns work with 1:1 mapping) -->
				<cells>
					<HBox>
						<Image
							src="{materialRodanteFormularioModel>imageUrl}"
							class="sapMUSTItemImage sapMUSTItemIcon"
							visible="{= ${materialRodanteFormularioModel>imageUrl} !== '' }"
						/>
						<core:Icon
							src="{parts: ['materialRodanteFormularioModel>mediaType', 'materialRodanteFormularioModel>fileName'], formatter: '.getIconSrc' }"
							color="white"
							visible="{= ${materialRodanteFormularioModel>imageUrl} === undefined || ${materialRodanteFormularioModel>imageUrl} === '' }"
							class="sapMUSTItemImage sapMUSTItemIcon"
						/>
						<VBox
							class="sapUiTinyMargin sapUiSmallMarginBegin"
						>
							<Link
								text="{materialRodanteFormularioModel>fileName}"
								press="openPreview"
								class="sapUiTinyMarginBottom"
							/>
							<Text text="{materialRodanteFormularioModel>documentType}" />
						</VBox>
					</HBox>
					<Text text="{materialRodanteFormularioModel>id}" />
					<Link text="{materialRodanteFormularioModel>revision}" />
					<Text text="{materialRodanteFormularioModel>status}" />
					<Text
						text="{parts: ['materialRodanteFormularioModel>fileSize'], formatter: '.getFileSizeWithUnits'}"
					/>
					<VBox>
						<Text text="{materialRodanteFormularioModel>lastModifiedBy}" />
						<Text
							class="sapUiTinyMarginTop"
							text="{materialRodanteFormularioModel>lastmodified}"
						/>
					</VBox>
					<Button
						class="sapUiTinyMarginBegin"
						type="Transparent"
						icon="sap-icon://decline"
						press="onRemoveHandler"
					/>
				</cells>
			</ColumnListItem>
		</items>
	</Table>
</mvc:View>
